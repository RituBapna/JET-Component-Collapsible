/*
 Copyright (c) 2014, Oracle and/or its affiliates.
 All rights reserved.
 Copyright 2013 jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
*/
define(["ojs/ojcore","jquery","ojs/ojcomponentcore"],function(a,f){(function(){var c=0;a.Ia("oj.ojCollapsible",f.oj.baseComponent,{widgetEventPrefix:"oj",options:{expanded:!1,expandOn:"click",expandArea:"disclosureIcon",beforeExpand:null,expand:null,beforeCollapse:null,collapse:null,optionChange:null},_ComponentCreate:function(){this._super();this.yG=f();this.element.addClass("oj-collapsible oj-component");this.mE();this.Tb()},_init:function(){this.Eq=!0;this.wF(this.options.expanded);this.Eq=void 0},
_OpenContextMenu:function(a,c){a.open(c,{launcher:this.element.find(".oj-collapsible-header-icon").first(),initialFocus:"menu"})},aN:function(){var a=this.options.expanded?"oj-collapsible-open-icon":"oj-collapsible-close-icon";f("\x3ca href\x3d'#'\x3e").addClass("oj-component-icon oj-clickable-icon oj-collapsible-header-icon "+a).attr("aria-labelledby",this.header.attr("id")).prependTo(this.header)},rB:function(){this.header.children(".oj-collapsible-header-icon").remove()},_destroy:function(){this.KA();
this.element.removeClass("oj-collapsible oj-component oj-expanded oj-collapsed oj-disabled");this.header.removeClass("oj-collapsible-header").each(function(){/^oj-collapsible/.test(this.id)&&this.removeAttribute("id")});this.Mm().removeAttr("role").removeAttr("aria-controls").removeAttr("aria-expanded").removeAttr("aria-disabled");this.rB();this.tu(this.content).removeAttr("tabIndex");this.content.css("display","").removeAttr("aria-hidden").removeAttr("tabIndex").removeClass("oj-component-content oj-collapsible-content").each(function(){/^oj-collapsible/.test(this.id)&&
this.removeAttribute("id")})},KA:function(){this.Ln();this.content&&(this.content.unwrap(),this.Ig=null)},EX:function(){return!1},aC:function(){return"header"==this.options.expandArea?"\x3e .oj-collapsible-header":"\x3e .oj-collapsible-header \x3e .oj-collapsible-header-icon"},_setOption:function(a,c,e){"expanded"===a?c!==this.options.expanded&&this.wF(c):"expandOn"===a||"expandArea"===a?(this.Ln(),this._super(a,c,e),this.Gj()):this._super(a,c,e)},zj:function(a){if(!a.altKey&&!a.ctrlKey){var c=f.ui.keyCode;
switch(a.keyCode){case c.SPACE:case c.ENTER:this.dG(a)}}},refresh:function(){this._super();this.KA();this.mE();this.rB();this.Tb()},mE:function(){this.header=this.element.children(":first-child").addClass("oj-collapsible-header");this.content=this.header.next().addClass("oj-collapsible-content oj-component-content");this.content.wrap("\x3cdiv\x3e\x3c/div\x3e");this.Ig=this.content.parent().addClass("oj-collapsible-wrapper")},Tb:function(){var a=this.header,d=this.content,e=this.options,f="oj-collapsible-"+
(this.element.attr("id")||++c),h=a.attr("id"),k=d.attr("id");h||a.attr("id",f+"-header");k||(k=f+"-content",d.attr("id",k));this.aN();this.Mm().attr("role","button").attr("aria-controls",k).attr("aria-expanded",e.expanded);this.tF(e.expanded?"0":"-1");e.expanded?d.attr("aria-hidden","false"):(this.Ig.css({"max-height":0,"overflow-y":"hidden",display:"none"}),this.Ig.css("max-height",0),d.attr("aria-hidden","true"));this.Gj()},wF:function(a){a?this.expand(!0):this.collapse(!0)},Gj:function(){var a=
{keydown:this.zj},c=this.options.expandOn;if(c){var e=this;f.each(c.split(" "),function(c,d){a[d]=e.dG})}c=this.element.find(this.aC());this._on(c,a);this._on(this.Ig,{transitionend:this.sr,webkitTransitionEnd:this.sr,otransitionend:this.sr,oTransitionEnd:this.sr});this._on(this.element,{ojexpand:this.ru,ojcollapse:this.ru,ojfocus:this.PB,ojfocusout:this.PB});this._hoverable(c);this._focusable(c);this.EL(c)},Ln:function(){this._off(this.element.find(this.aC()));this.Ig&&this._off(this.Ig);this._off(this.element.add(this.content))},
dG:function(a){this.options.expanded?this.collapse(!0,a):this.expand(!0,a);a.preventDefault();a.stopPropagation();this.header.find(".oj-collapsible-header-icon").focus()},ru:function(a){if(a.target===this.element[0]&&(this.Eq||!a.isDefaultPrevented())){var c=this.element,e=this.options,f=this.content,h=this.Ig,k="ojcollapse"===a.type;a.preventDefault();e.expanded=!k;this.Eq?k?(c.removeClass("oj-expanded"),c.addClass("oj-collapsed"),h.css("max-height",0),h.hide()):(c.removeClass("oj-collapsed"),c.addClass("oj-expanded")):
(h.Kr=h.outerHeight(),k?(h.removeClass("oj-collapsible-transition"),h.css({"max-height":h.Kr,"overflow-y":"hidden"}),setTimeout(function(){h.addClass("oj-collapsible-transition").css({"max-height":0});c.removeClass("oj-expanded");c.addClass("oj-collapsed")},10)):(h.show(),setTimeout(function(){h.Kr+=f.outerHeight();h.addClass("oj-collapsible-transition").css({"max-height":h.Kr});c.removeClass("oj-collapsed");c.addClass("oj-expanded")},1)));this.header.find(".oj-collapsible-header-icon").toggleClass("oj-collapsible-open-icon",
!k).toggleClass("oj-collapsible-close-icon",k||!1).end();this.content.attr("aria-hidden",k);this.Mm().attr("aria-expanded",!k);this.tF(k?"-1":"0")}},PB:function(a){"ojfocusout"==a.type?(this.Mm().attr("tabIndex",-1),a.preventDefault(),a.stopPropagation()):"ojfocus"==a.type&&(this.Mm().attr("tabIndex",0).focus(),a.preventDefault(),a.stopPropagation())},Mm:function(){return this.tu(this.header).first()},tF:function(a){return this.tu(this.content).attr("tabIndex",a)},tu:function(a){return a.find("a,:input")},
expand:function(a,c){var e={header:this.header,content:this.content};a&&!1===this._trigger("beforeExpand",c,e)||(this._trigger("expand",c,e),this.Jf("expanded",!1,!0,c?!0:!1))},collapse:function(a,c){if(this.Eq){var e=this.element[0];this.ru({type:"ojcollapse",target:e,currentTarget:e,preventDefault:f.noop})}else e={header:this.header,content:this.content},a&&!1===this._trigger("beforeCollapse",c,e)||(this._trigger("collapse",c,e),this.Jf("expanded",!0,!1,c?!0:!1))},sr:function(a){"max-height"==(a.originalEvent?
a.originalEvent.propertyName:null)&&(a.preventDefault(),a.stopPropagation());this.options.expanded?this.Ig.css({"max-height":9999,"overflow-y":""}):this.Ig.hide();this.Ig.removeClass("oj-collapsible-transition")},EL:function(a){this.yG=this.yG.add(a);this._on(a,{mousedown:function(a){f(a.currentTarget).addClass("oj-active")},mouseup:function(a){f(a.currentTarget).removeClass("oj-active")}})},Jf:function(a,c,e,f){this._trigger("optionChange",f,{option:a,previousValue:c,value:e,optionMetadata:{writeback:f?
"shouldWrite":"shouldNotWrite"}})},getNodeBySubId:function(a){if(null==a)return this.element?this.element[0]:null;a=a.subId;switch(a){case "oj-collapsible-content":return this.content;case "oj-collapsible-header":return this.header;case "oj-collapsible-header-icon":return this.header.find("."+a)[0]}return null}})})()});
//# sourceMappingURL=oj-modular.map