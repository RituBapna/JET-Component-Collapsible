/*
 Copyright (c) 2014, Oracle and/or its affiliates.
 All rights reserved.
 Copyright 2013 jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
*/
define(["ojs/ojcore","jquery","knockout","ojs/ojpagingcontrol","ojs/ojknockout-model"],function(a,f,c){a.vb=function(a){this.na=a;this.current=0;this.Init();this.mf=[];this.setPageSize(10)};o_("CollectionPagingDataSource",a.vb,a);a.b.qa(a.vb,a.ib,"oj.CollectionPagingDataSource");a.vb.prototype.Init=function(){a.vb.t.Init.call(this)};a.b.g("CollectionPagingDataSource.prototype.Init",{Init:a.vb.prototype.Init});a.vb.prototype.bv=function(){return this.hasMore()?this.pageSize:this.totalSize()-this.startIndex()};
a.vb.prototype.qh=function(){this.mf=Array(this.bv());var a=this;return this.na.Tl(this.startIndex(),this.startIndex()+this.mf.length).then(function(c){for(var e=0;e<c.length;e++)a.mf[e]=c[e];a.zn()})};a.vb.prototype.zn=function(){if(void 0!==this.Rf){this.Rf.removeAll();for(var b=0;b<this.mf.length;b++)this.Rf.push(a.Xa.map(this.mf[b]))}};a.vb.prototype.Oj=function(){return this.mf};a.b.g("CollectionPagingDataSource.prototype.getWindow",{Oj:a.vb.prototype.Oj});a.vb.prototype.jo=function(){void 0===
this.Rf&&(this.Rf=c.observableArray(),this.zn());return this.Rf};a.b.g("CollectionPagingDataSource.prototype.getWindowObservable",{jo:a.vb.prototype.jo});a.vb.prototype.fetch=function(a){var c=a||{};void 0!==c.startIndex&&(this.current=c.startIndex);void 0!==c.pageSize&&(this.pageSize=c.pageSize);var e=this;try{this.na.fetch({success:function(){e.qh().then(function(){e.xn(c)})}})}catch(f){e.qh().then(function(){e.xn(c)})}};a.b.g("CollectionPagingDataSource.prototype.fetch",{fetch:a.vb.prototype.fetch});
a.vb.prototype.xn=function(a){a=a||{};this.handleEvent("sync",null);a.success&&a.success()};a.vb.prototype.handleEvent=function(b,c){a.vb.t.handleEvent.call(this,b,c)};a.vb.prototype.hasMore=function(){return this.startIndex()+this.pageSize<this.totalSize()};a.b.g("CollectionPagingDataSource.prototype.hasMore",{hasMore:a.vb.prototype.hasMore});a.vb.prototype.next=function(){if(this.hasMore()){this.current+=this.pageSize;var a=this;return this.qh().then(function(){a.xn(null)})}this.xn(null)};a.b.g("CollectionPagingDataSource.prototype.next",
{next:a.vb.prototype.next});a.vb.prototype.previous=function(){0>this.startIndex()-this.pageSize?this.current=0:this.current-=this.pageSize;var a=this;return this.qh().then(function(){a.xn(null)})};a.b.g("CollectionPagingDataSource.prototype.previous",{previous:a.vb.prototype.previous});a.vb.prototype.setPageSize=function(a){this.pageSize=a};a.vb.prototype.startIndex=function(){return this.current};a.b.g("CollectionPagingDataSource.prototype.startIndex",{startIndex:a.vb.prototype.startIndex});a.vb.prototype.size=
function(){var a=this.Oj();return a?a.length:0};a.b.g("CollectionPagingDataSource.prototype.size",{size:a.vb.prototype.size});a.vb.prototype.totalSize=function(){return this.na.length};a.b.g("CollectionPagingDataSource.prototype.totalSize",{totalSize:a.vb.prototype.totalSize});a.yb=function(a){this.data=a;this.current=0;this.Init();this.setPageSize(10)};o_("ArrayPagingDataSource",a.yb,a);a.b.qa(a.yb,a.ib,"oj.ArrayPagingDataSource");a.yb.prototype.Init=function(){a.yb.t.Init.call(this)};a.b.g("ArrayPagingDataSource.prototype.Init",
{Init:a.yb.prototype.Init});a.yb.prototype.bv=function(){return this.hasMore()?this.pageSize:this.totalSize()-this.startIndex()};a.yb.prototype.qh=function(){this.mf=Array(this.bv());for(var a=0;a<this.mf.length;a++)this.mf[a]=this.data[this.startIndex()+a];this.zn();this.handleEvent("sync",null)};a.yb.prototype.zn=function(){if(void 0!==this.Rf){this.Rf.removeAll();for(var a=0;a<this.mf.length;a++)this.Rf.push(this.mf[a])}};a.yb.prototype.handleEvent=function(b,c){a.yb.t.handleEvent.call(this,b,
c)};a.yb.prototype.Oj=function(){return this.mf};a.b.g("ArrayPagingDataSource.prototype.getWindow",{Oj:a.yb.prototype.Oj});a.yb.prototype.jo=function(){void 0===this.Rf&&(this.Rf=c.observableArray(),this.zn());return this.Rf};a.b.g("ArrayPagingDataSource.prototype.getWindowObservable",{jo:a.yb.prototype.jo});a.yb.prototype.fetch=function(a){a=a||{};void 0!==a.startIndex&&(this.current=a.startIndex);void 0!==a.pageSize&&(this.pageSize=a.pageSize);this.qh()};a.b.g("ArrayPagingDataSource.prototype.fetch",
{fetch:a.yb.prototype.fetch});a.yb.prototype.hasMore=function(){return this.startIndex()+this.pageSize<this.totalSize()};a.b.g("ArrayPagingDataSource.prototype.hasMore",{hasMore:a.yb.prototype.hasMore});a.yb.prototype.next=function(){this.hasMore()&&(this.current+=this.pageSize,this.qh())};a.b.g("ArrayPagingDataSource.prototype.next",{next:a.yb.prototype.next});a.yb.prototype.previous=function(){0>this.startIndex()-this.pageSize?this.current=0:this.current-=this.pageSize;this.qh()};a.b.g("ArrayPagingDataSource.prototype.previous",
{previous:a.yb.prototype.previous});a.yb.prototype.setPageSize=function(a){this.pageSize=a;this.qh()};a.yb.prototype.startIndex=function(){return this.current};a.b.g("ArrayPagingDataSource.prototype.startIndex",{startIndex:a.yb.prototype.startIndex});a.yb.prototype.size=function(){return this.Oj().length};a.b.g("ArrayPagingDataSource.prototype.size",{size:a.yb.prototype.size});a.yb.prototype.totalSize=function(){return this.data.length};a.b.g("ArrayPagingDataSource.prototype.totalSize",{totalSize:a.yb.prototype.totalSize})});
//# sourceMappingURL=oj-modular.map