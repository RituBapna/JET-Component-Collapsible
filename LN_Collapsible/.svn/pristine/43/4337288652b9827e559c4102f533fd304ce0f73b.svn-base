/*
 Copyright (c) 2014, Oracle and/or its affiliates.
 All rights reserved.
 Copyright 2013 jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 Copyright (c) 2014, Oracle and/or its affiliates.
 All rights reserved.
 Copyright 2013 jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 Copyright (c) 2014, Oracle and/or its affiliates.
 All rights reserved.
 Copyright 2013 jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
*/
define(["ojs/ojcore","jquery","ojs/ojmodel","ojs/ojdatacollection-common","ojs/ojtable"],function(a,f){a.pb=function(c,b){a.pb._init(this,c,b,null)};o_("ModelRow",a.pb,a);a.b.qa(a.pb,a.eb,"ModelRow.ModelRow");a.pb.prototype.Init=function(){a.eb.t.Init.call(this)};a.pb.prototype.attributes={};a.b.g("ModelRow.prototype.attributes",{attributes:a.pb.prototype.attributes});a.pb.prototype.id=null;a.b.g("ModelRow.prototype.id",{id:a.pb.prototype.id});a.pb.prototype.Oe=null;a.b.g("ModelRow.prototype.idAttribute",
{Oe:a.pb.prototype.Oe});a.pb._init=function(a,b,d,e){var f=null;a.Init();a.Bj=b;a.id=b.id;a.Oe=b.Oe;a.attributes=b.attributes;a.index=b.index;d=d||{};for(f in e)e.hasOwnProperty(f)&&(a[f]=e[f]);a.context=d.context};a.pb.prototype.clone=function(){return this.Bj.clone()};a.b.g("ModelRow.prototype.clone",{clone:a.pb.prototype.clone});a.pb.prototype.get=function(a){return this.Bj.get(a)};a.b.g("ModelRow.prototype.get",{get:a.pb.prototype.get});a.pb.prototype.tx=function(){return this.Bj};a.b.g("ModelRow.prototype.getModel",
{tx:a.pb.prototype.tx});a.pb.prototype.set=function(a,b,d){return this.Bj.set(a,b,d)};a.b.g("ModelRow.prototype.set",{set:a.pb.prototype.set});a.pb.prototype.keys=function(){return this.Bj.keys()};a.b.g("ModelRow.prototype.keys",{keys:a.pb.prototype.keys});a.pb.prototype.values=function(){return this.Bj.values()};a.b.g("ModelRow.prototype.values",{values:a.pb.prototype.values});a.pb.prototype.pairs=function(){return this.Bj.pairs()};a.b.g("ModelRow.prototype.pairs",{pairs:a.pb.prototype.pairs});a.xa=
function(c,b){a.xa._init(this,c,b,null)};o_("CollectionRowSet",a.xa,a);a.xa.prototype.jf=null;a.b.g("CollectionRowSet.prototype.comparator",{jf:a.xa.prototype.jf});a.xa.prototype.Ll=null;a.b.g("CollectionRowSet.prototype.sortDirection",{Ll:a.xa.prototype.Ll});a.xa.prototype.Tf=!0;a.b.g("CollectionRowSet.prototype.sortSupported",{Tf:a.xa.prototype.Tf});a.b.qa(a.xa,a.Q,"CollectionRowSet.CollectionRowSet");a.xa.prototype.Init=function(){a.xa.t.Init.call(this)};a.xa._init=function(a,b,d,e){var f;a.Sb=
[];a.O=0;a.Init();if(e)for(f in e)e.hasOwnProperty(f)&&(a[f]=e[f]);a.Jb=b;a.FL()};a.xa.prototype.at=function(c,b){var d=this.Jb.at(c,b);return null!=d?d instanceof a.q?new a.pb(d):a.b.ma(function(b){d.then(function(c){b(new a.pb(c))})}):null};a.b.g("CollectionRowSet.prototype.at",{at:a.xa.prototype.at});a.xa.prototype.fetch=function(a){if(this.AM.call(this)){this.Aw.call(this);a=a||{};var b=this,d=null!=a.startIndex?!0:!1;this.O=d?a.startIndex:0;this.xQ=!0;var e=0<a.pageSize?a.pageSize:-1;a.pageSize=
e;a.startIndex=this.O;a.refresh=!0;d?this.Jb.ps(this.O,e).then(function(){b.Hf.call(b,a,null)}):this.Jb.fetch({success:function(d){b.Jb=d;b.Hf.call(b,a,null)},error:function(d,e){b.Jb=d;b.Hf.call(b,a,e)}})}};a.b.g("CollectionRowSet.prototype.fetch",{fetch:a.xa.prototype.fetch});a.xa.prototype.get=function(c,b){return new a.pb(this.Jb.get(c,b))};a.b.g("CollectionRowSet.prototype.get",{get:a.xa.prototype.get});a.xa.prototype.getCollection=function(){return this.Jb};a.b.g("CollectionRowSet.prototype.getCollection",
{getCollection:a.xa.prototype.getCollection});a.xa.prototype.hasMore=function(){return this.Jb.hasMore};a.b.g("CollectionRowSet.prototype.hasMore",{hasMore:a.xa.prototype.hasMore});a.xa.prototype.indexOf=function(a,b){return this.Jb.indexOf(a.tx(),b)};a.b.g("CollectionRowSet.prototype.indexOf",{indexOf:a.xa.prototype.indexOf});a.xa.prototype.isEmpty=function(){return this.Jb.isEmpty()};a.b.g("CollectionRowSet.prototype.isEmpty",{isEmpty:a.xa.prototype.isEmpty});a.xa.prototype.size=function(){var a=
this.Jb.size();return this.xQ||this.Jb.Fx(0,a)?a:0};a.b.g("CollectionRowSet.prototype.size",{size:a.xa.prototype.size});a.xa.prototype.sort=function(){this.comparator&&(this.Jb.comparator=this.comparator);this.sortDirection&&(this.Jb.sortDirection="ascending"===this.sortDirection?1:-1);return this.Jb.sort(null)};a.b.g("CollectionRowSet.prototype.sort",{sort:a.xa.prototype.sort});a.xa.prototype.totalSize=function(){return this.Jb.totalResults};a.b.g("CollectionRowSet.prototype.totalSize",{totalSize:a.xa.prototype.totalSize});
a.xa.prototype.BJ=function(a){var b=a.key;a=a.direction;var d=null;this.Jb.Za()?(this.comparator=b,this.sortDirection=a):("ascending"==a?d=function(a){return f.isFunction(a.get)?a.get(b):a[b]()}:"descending"==a&&(d=function(a,c){var d,k;f.isFunction(a.get)?(d=a.get(b),k=c.get(b)):(d=a[b](),k=c[b]());return d===k?0:d>k?-1:1}),this.comparator=d)};a.xa.prototype.FL=function(){var c=this;this.Jb.on(a.X.v.SYNC,function(b){a.xa.t.Yb.call(c,a.Q.v.SYNC,b)});this.Jb.on(a.X.v.ADD,function(b){a.xa.t.Yb.call(c,
a.Q.v.ADD,new a.pb(b))});this.Jb.on(a.X.v.REMOVE,function(b){a.xa.t.Yb.call(c,a.Q.v.REMOVE,new a.pb(b))});this.Jb.on(a.X.v.RESET,function(b){a.xa.t.Yb.call(c,a.Q.v.RESET,b)});this.Jb.on(a.X.v.SORT,function(b,d){null!=d&&d.add||a.xa.t.Yb.call(c,a.Q.v.SORT,b)});this.Jb.on(a.X.v.CHANGE,function(b){a.xa.t.Yb.call(c,a.Q.v.CHANGE,new a.pb(b))});this.Jb.on(a.X.v.DESTROY,function(b){a.xa.t.Yb.call(c,a.Q.v.REMOVE,b)});this.Jb.on(a.X.v.REFRESH,function(b){a.xa.t.Yb.call(c,a.Q.v.REFRESH,b)});this.Jb.on(a.X.v.ERROR,
function(b){a.xa.t.Yb.call(c,a.Q.v.ERROR,b);c.Hf.call(c,null,null)})};a.xa.prototype.AM=function(){return!this.iD};a.xa.prototype.Aw=function(){this.iD=!0;a.xa.t.Yb.call(this,a.Q.v.REQUEST,null)};a.xa.prototype.Hf=function(c,b){c=c||{};var d=c.success,e=c.error;this.iD=!1;null!=b?(a.xa.t.Yb.call(this,a.Q.v.ERROR,b),e&&e.call(this,c,b)):(a.xa.t.Yb.call(this,a.Q.v.SYNC,c),d&&d.call(this,c))};a.Wb=function(c,b){this.data={};if(!(c instanceof a.l))throw Error(a.J.wc._ERR_DATA_INVALID_TYPE_SUMMARY+"\n"+
a.J.wc._ERR_DATA_INVALID_TYPE_DETAIL);a.Wb.t.constructor.call(this,c,b);this.aa=new a.xa(c,this.options);this.sm();this.Init();if(null!=b&&("enabled"==b.startFetch||null==b.startFetch)||null==b)this.Jn=!0};o_("CollectionTableDataSource",a.Wb,a);a.b.qa(a.Wb,a.J,"oj.CollectionTableDataSource");a.Wb.prototype.Init=function(){a.Wb.t.Init.call(this)};a.b.g("CollectionTableDataSource.prototype.Init",{Init:a.Wb.prototype.Init});a.Wb.prototype.at=function(a){return this.aa.at(a)};a.b.g("CollectionTableDataSource.prototype.at",
{at:a.Wb.prototype.at});a.Wb.prototype.fetch=function(c){c=c||{};var b=this,d=c.success,e=c.error,f=null==c.context?this:c.context;if("init"==c.fetchType&&!this.Jn)return a.b.ma(function(a){a()});null!=c.startIndex&&a.Wb.t.startIndex.call(this,c.startIndex);return a.b.ma(function(a,k){c.success=function(){null!=d&&d.call(f,b,c);a()};c.error=function(a,c){null!=e&&e.call(f,b,a,c);k()};"enabled"==c.startFetch?(b.aa.isEmpty()||"undefined"===typeof b.aa.size())&&b.aa.fetch(c):b.aa.fetch(c)})};a.b.g("CollectionTableDataSource.prototype.fetch",
{fetch:a.Wb.prototype.fetch});a.Wb.prototype.get=function(a){return this.aa.get(a)};a.b.g("CollectionTableDataSource.prototype.get",{get:a.Wb.prototype.get});a.Wb.prototype.hasMore=function(){return null!=this.aa?this.aa.hasMore():!1};a.b.g("CollectionTableDataSource.prototype.hasMore",{hasMore:a.Wb.prototype.hasMore});a.Wb.prototype.indexOf=function(a){return this.aa.indexOf(a)};a.b.g("CollectionTableDataSource.prototype.indexOf",{indexOf:a.Wb.prototype.indexOf});a.Wb.prototype.size=function(){return this.aa.size()};
a.b.g("CollectionTableDataSource.prototype.size",{size:a.Wb.prototype.size});a.Wb.prototype.sort=function(c){this.aa.BJ(c);var b=this;return a.b.ma(function(a){b.aa.sort();a()})};a.b.g("CollectionTableDataSource.prototype.sort",{sort:a.Wb.prototype.sort});a.Wb.prototype.totalSize=function(){return this.aa.totalSize()};a.b.g("CollectionTableDataSource.prototype.totalSize",{totalSize:a.Wb.prototype.totalSize});a.Wb.prototype.sm=function(){var c=this;this.aa.on(a.Q.v.ADD,function(b){c.Qc=!1;a.J.t.handleEvent.call(c,
a.J.v.ADD,b)});this.aa.on(a.Q.v.REMOVE,function(b){c.Qc=!1;a.J.t.handleEvent.call(c,a.J.v.REMOVE,b)});this.aa.on(a.Q.v.REQUEST,function(b){c.Qc=!0;a.J.t.handleEvent.call(c,a.J.v.REQUEST,b)});this.aa.on(a.Q.v.RESET,function(b){c.Qc=!1;a.J.t.handleEvent.call(c,a.J.v.RESET,b)});this.aa.on(a.Q.v.REFRESH,function(b){c.Qc=!1;a.J.t.handleEvent.call(c,a.J.v.REFRESH,b)});this.aa.on(a.Q.v.SORT,function(b){c.Qc=!1;a.J.t.handleEvent.call(c,a.J.v.SORT,b)});this.aa.on(a.Q.v.CHANGE,function(b){c.Qc=!1;a.J.t.handleEvent.call(c,
a.J.v.CHANGE,b)});this.aa.on(a.Q.v.SYNC,function(b){c.Qc=!1;a.J.t.handleEvent.call(c,a.J.v.SYNC,b)});this.aa.on(a.Q.v.ERROR,function(b){c.Qc=!1;a.J.t.handleEvent.call(c,a.J.v.ERROR,b)})}});
//# sourceMappingURL=oj-modular.map