/*
 Copyright (c) 2014, Oracle and/or its affiliates.
 All rights reserved.
 Copyright 2012 Igor Vaynberg

 This software is licensed under the Apache License, Version 2.0 (the "Apache License") or the GNU
 General Public License version 2 (the "GPL License"). You may choose either license to govern your
 use of this software only upon the condition that you accept all of the terms of either the Apache
 License or the GPL License.

 You may obtain a copy of the Apache License and the GPL License at:

 http://www.apache.org/licenses/LICENSE-2.0
 http://www.gnu.org/licenses/gpl-2.0.html

 Unless required by applicable law or agreed to in writing, software distributed under the
 Apache License or the GPL Licesnse is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 CONDITIONS OF ANY KIND, either express or implied. See the Apache License and the GPL License for
 the specific language governing permissions and limitations under the Apache License and the GPL License.
 Copyright (c) 2014, Oracle and/or its affiliates.
 All rights reserved.
 Copyright 2012 Igor Vaynberg

 This software is licensed under the Apache License, Version 2.0 (the "Apache License") or the GNU
 General Public License version 2 (the "GPL License"). You may choose either license to govern your
 use of this software only upon the condition that you accept all of the terms of either the Apache
 License or the GPL License.

 You may obtain a copy of the Apache License and the GPL License at:

 http://www.apache.org/licenses/LICENSE-2.0
 http://www.gnu.org/licenses/gpl-2.0.html

 Unless required by applicable law or agreed to in writing, software distributed under the
 Apache License or the GPL Licesnse is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 CONDITIONS OF ANY KIND, either express or implied. See the Apache License and the GPL License for
 the specific language governing permissions and limitations under the Apache License and the GPL License.
 Copyright (c) 2014, Oracle and/or its affiliates.
 All rights reserved.
 Copyright 2012 Igor Vaynberg

 This software is licensed under the Apache License, Version 2.0 (the "Apache License") or the GNU
 General Public License version 2 (the "GPL License"). You may choose either license to govern your
 use of this software only upon the condition that you accept all of the terms of either the Apache
 License or the GPL License.

 You may obtain a copy of the Apache License and the GPL License at:

 http://www.apache.org/licenses/LICENSE-2.0
 http://www.gnu.org/licenses/gpl-2.0.html

 Unless required by applicable law or agreed to in writing, software distributed under the
 Apache License or the GPL Licesnse is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 CONDITIONS OF ANY KIND, either express or implied. See the Apache License and the GPL License for
 the specific language governing permissions and limitations under the Apache License and the GPL License.
 Copyright (c) 2014, Oracle and/or its affiliates.
 All rights reserved.
 Copyright 2012 Igor Vaynberg

 This software is licensed under the Apache License, Version 2.0 (the "Apache License") or the GNU
 General Public License version 2 (the "GPL License"). You may choose either license to govern your
 use of this software only upon the condition that you accept all of the terms of either the Apache
 License or the GPL License.

 You may obtain a copy of the Apache License and the GPL License at:

 http://www.apache.org/licenses/LICENSE-2.0
 http://www.gnu.org/licenses/gpl-2.0.html

 Unless required by applicable law or agreed to in writing, software distributed under the
 Apache License or the GPL Licesnse is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 CONDITIONS OF ANY KIND, either express or implied. See the Apache License and the GPL License for
 the specific language governing permissions and limitations under the Apache License and the GPL License.
 Copyright (c) 2014, Oracle and/or its affiliates.
 All rights reserved.
 Copyright (c) 2014, Oracle and/or its affiliates.
 All rights reserved.
 Copyright (c) 2014, Oracle and/or its affiliates.
 All rights reserved.
 Copyright 2012 Igor Vaynberg

 This software is licensed under the Apache License, Version 2.0 (the "Apache License") or the GNU
 General Public License version 2 (the "GPL License"). You may choose either license to govern your
 use of this software only upon the condition that you accept all of the terms of either the Apache
 License or the GPL License.

 You may obtain a copy of the Apache License and the GPL License at:

 http://www.apache.org/licenses/LICENSE-2.0
 http://www.gnu.org/licenses/gpl-2.0.html

 Unless required by applicable law or agreed to in writing, software distributed under the
 Apache License or the GPL Licesnse is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 CONDITIONS OF ANY KIND, either express or implied. See the Apache License and the GPL License for
 the specific language governing permissions and limitations under the Apache License and the GPL License.
*/
define(["ojs/ojcore","jquery","ojs/ojeditablevalue"],function(a,f){var c={Ha:{TAB:9,ENTER:13,Vs:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,fK:16,IJ:17,FJ:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,fp:8,Ty:46,KY:function(a){a=a.which?a.which:a;switch(a){case c.Ha.LEFT:case c.Ha.RIGHT:case c.Ha.UP:case c.Ha.DOWN:return!0}return!1},zI:function(a){switch(a.which){case c.Ha.fK:case c.Ha.IJ:case c.Ha.FJ:return!0}return a.metaKey?!0:!1},BI:function(a){a=a.which?a.which:a;return 112<=a&&123>=a}},gy:{x:0,y:0},
To:function(){var a=1;return function(){return a++}}(),dJ:null,Bi:function(a,b){for(var c=f(a[0]),d=-1,e=a.length;++d<e&&(c.context=c[0]=a[d])&&!1!==b.call(c[0],d,c););return a},HW:function(){var a=f("\x3cdiv class\x3d'oj-listbox-measure-scrollbar'\x3e\x3c/div\x3e");a.appendTo("body");var b={width:a.width()-a[0].clientWidth,height:a.height()-a[0].clientHeight};a.remove();return b},gk:function(a,b){var c,d,e;if(null===a||1>a.length)return[];c=a.split(b);d=0;for(e=c.length;d<e;d+=1)c[d]=f.trim(c[d]);
return c},dI:function(a){return a.outerWidth(!1)-a.width()},wW:function(a){a.on("keydown",function(){void 0===f.data(a,"keyup-change-value")&&f.data(a,"keyup-change-value",a.val())});a.on("keyup",function(b){b.which===c.Ha.ENTER?b.stopPropagation():(b=f.data(a,"keyup-change-value"),void 0!==b&&a.val()!==b&&(f.removeData(a,"keyup-change-value"),a.trigger("keyup-change")))})},vW:function(a){a.on("mousemove",function(a){var b=c.gy;if(void 0===b||b.x!==a.pageX||b.y!==a.pageY)f(a.target).trigger("mousemove-filtered",
a),c.gy.x=a.pageX,c.gy.y=a.pageY})},tX:function(a){var b=!1,c;return function(){!1===b&&(c=a(),b=!0);return c}},Rd:function(a){a[0]!==document.activeElement&&window.setTimeout(function(){var b=a[0],c=a.val().length;a.focus();a.is(":visible")&&b===document.activeElement&&(b.setSelectionRange?b.setSelectionRange(c,c):b.createTextRange&&(b=b.createTextRange(),b.collapse(!1),b.select()))},0)},WV:function(a){a=f(a)[0];var b=0,c=0;"selectionStart"in a?(b=a.selectionStart,c=a.selectionEnd-b):"selection"in
document&&(a.focus(),b=document.selection.createRange(),c=document.selection.createRange().text.length,b.moveStart("character",-a.value.length),b=b.text.length-c);return{offset:b,length:c}},Jd:function(a){a.preventDefault();a.stopPropagation()},AW:function(a){a.preventDefault();a.stopImmediatePropagation()},HV:function(a){var b={"\\":"\x26#92;","\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#39;"};return String(a).replace(/[&<>"'\\]/g,function(a){return b[a]})},EW:function(a,
b){function d(a){return""+a.label}var e=a,g,p;f.isArray(e)&&(p=e,e={nc:p});!1===f.isFunction(e)&&(p=e,e=function(){return p});var h=e();h&&h.text&&(d=h.text,f.isFunction(d)||(g=h.text,d=function(a){return a[g]}));return function(a){var g=a.Rs,p={nc:[]},h;""===g?a.gc(e()):(h=function(b,e,p){var l,k;b=b[0];!b.label&&p&&p.label&&(b.label=b[p.label],delete b[p.label]);!b.value&&p&&p.value&&(b.value=b[p.value],delete b[p.value]);!b.children&&p&&p.children&&(b.children=b[p.children],delete b[p.children]);
if(b.children){l={};for(k in b)b.hasOwnProperty(k)&&(l[k]=b[k]);l.children=[];c.Bi(f(b.children),function(a,b){h(b,l.children,p&&p.childKeys?p.childKeys:null)});l.children.length&&e.push(l)}else a.Sl(g,d(b),b)&&e.push(b)},c.Bi(f(e().nc),function(a,c){h(c,p.nc,b)}),a.gc(p))}},qV:function(a,b,c){if(f.isFunction(b))return!0;if(!b)return!1;throw Error(c+" must be a function or a false value");},mo:function(b,c){function d(){}a.b.ra(d,b,"");d.prototype=f.extend(d.prototype,c);return d}},b=c.mo(Object,
{sc:function(a){var b=this;return function(){a.apply(b,arguments)}},_init:function(b){var d,e=this.Ga,g=this.tc;this.$d=b.$d;this.ca=b=this.el(b);this.id=b.id;void 0!==b.element.data(g)&&null!==b.element.data(g)&&b.element.data(g)._destroy();this.ta=this.tu();var h=this.ca.rootAttributes;this.Sj=h&&h.id?h.id:"ojChoiceId_"+(b.element.attr("id")||"autogen"+c.To());this.Sj.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1");this.ta.attr("id",this.Sj);this.body=c.tX(function(){return b.element.closest("body")});
this.ta.attr("style",b.element.attr("style"));this.Ex=this.ca.element.attr("tabindex");this.ca.element.data(g,this).attr("tabindex","-1").before(this.ta);this.ta.data(g,this);this.Gc=this.ta.find(".oj-listbox-drop");this.Gc.data("ojlistbox",this);this.Gc.on("click",c.Jd);this.Gc.attr(a.da.cg,this.Sj);this.nc=this.ta.find(".oj-listbox-results");this.search=d="oj-select"==e?this.ta.find("input.oj-listbox-input"):this.ta.find("input."+e+"-input");this.By=this.aJ=0;this.context=null;this.Zq();this.ta.on("click",
c.Jd);c.vW(this.nc);this.Gc.on("mousemove-filtered touchstart touchmove touchend",".oj-listbox-results",this.sc(this.uD));f(this.ta).on("change","."+e+"-input",function(a){a.stopPropagation()});f(this.Gc).on("change","."+e+"-input",function(a){a.stopPropagation()});c.wW(d);d.on("keyup-change input paste",this.sc(this.Xr));d.on("focus",function(){d.addClass(e+"-focused")});d.on("blur",function(){d.removeClass(e+"-focused")});this.Gc.on("mouseup",".oj-listbox-results",this.sc(function(a){0<f(a.target).closest(".oj-listbox-result-selectable").length&&
(this.uD(a),this.Dr(null,a))}));this.Gc.on("click mouseup mousedown",function(a){a.stopPropagation()});f.isFunction(this.ca.Ii)&&this.Yk();h=b.element.prop("disabled");void 0===h&&(h=!1);this.ai(!h);h=b.element.prop("readonly");void 0===h&&(h=!1);this.hl(h);c.dJ=c.dJ||c.HW();this.autofocus=b.element.prop("autofocus");b.element.prop("autofocus",!1);this.autofocus&&this.Rd();(h=f(document).data("ojChoiceClickAwayHandler-"+g))?h.oo.push(this):(h=function(a){var b=f("#oj-listbox-drop");!f(a.target).closest(b).length&&
0<b.length&&(b=b.data("ojlistbox"),b.ca.cX&&b.Dr({RI:!0},a),b.close(a))},document.addEventListener("mousedown",h,!0),h={BW:h,oo:[]},h.oo.push(this),f(document).data("ojChoiceClickAwayHandler-"+g,h))},_destroy:function(){var a=this.ca.element,b=a.data(this.tc);this.close();this.$I&&(delete this.$I,this.$I=null);void 0!==b&&(b.ta.remove(),b.Gc.remove(),a.removeAttr("aria-hidden").removeData(this.tc).off("."+this.Ga).prop("autofocus",this.autofocus||!1),this.Ex?a.attr({cZ:this.Ex}):a.removeAttr("tabindex"),
a.show());a=f(document).data("ojChoiceClickAwayHandler-"+this.tc);b=a.oo.indexOf(this);-1<b&&(a.oo.splice(b,1),a.oo.length||(document.removeEventListener("mousedown",a.BW,!0),f(document).removeData("ojChoiceClickAwayHandler-"+this.tc)))},cl:function(a){if(a.is("option"))return{value:a.prop("value"),label:a.text(),element:a.get(),css:a.attr("class"),disabled:a.prop("disabled"),locked:"locked"===a.attr("locked")||!0===a.data("locked")};if(a.is("optgroup"))return{label:a.attr("label"),children:[],element:a.get(),
css:a.attr("class")}},el:function(a){var b,e,g=this;b=a.element;var h=b.get(0).tagName.toLowerCase();"input"===h&&b.attr("list")?this.Ai=e=f("#"+b.attr("list")):"select"===h&&0<b.children().length&&(this.Ai=e=b);a=f.extend({},{OW:function(b,d,e,h){var k,m=this.ca.id;k=function(b,d,p,h){var s,n,u,r,z;s=g.uj();h&&null!==s&&!e.Rs&&(n={value:"",label:s},z=f("\x3cli\x3e\x3c/li\x3e"),z.addClass("oj-listbox-placeholder oj-listbox-results-depth-0 oj-listbox-result oj-listbox-result-selectable"),z.attr("role",
"presentation"),u=f(document.createElement("div")),u.addClass("oj-listbox-result-label"),u.attr("id","oj-listbox-result-label-"+c.To()),u.attr("role","option"),r=a.KH(n),void 0!==r&&u.html(r),z.append(u),z.data(g.tc,n),d.append(z));h=0;for(s=b.length;h<s;h+=1)n=b[h],r=!0===n.disabled,u=!r&&void 0!==m(n),z=f("\x3cli\x3e\x3c/li\x3e"),z.addClass("oj-listbox-results-depth-"+p),z.addClass("oj-listbox-result"),z.addClass(u?"oj-listbox-result-selectable":"oj-listbox-result-unselectable"),r&&z.addClass("oj-disabled"),
n.children&&z.addClass("oj-listbox-result-with-children"),z.attr("role","presentation"),u=f(document.createElement("div")),u.addClass("oj-listbox-result-label"),u.attr("id","oj-listbox-result-label-"+c.To()),u.attr("role","option"),r&&u.attr("aria-disabled","true"),r=a.KH(n),void 0!==r&&u.html(r),z.append(u),n.children&&0<n.children.length&&(r=f("\x3cul\x3e\x3c/ul\x3e"),r.addClass("oj-listbox-result-sub"),k(n.children,r,p+1,!1),z.append(r)),z.data(g.tc,n),d.append(z)};k(d,b,0,h)}},d,a);a.id=function(a){return a.value};
a.KH=function(b){var c=[];c.push(a.ms(b.label));return c.join("")};a.Hx=function(a,b,c){return a&&a.label?c(a.label):void 0};"select"!==h&&null!==a.manageNewEntry&&(a.manageNewEntry=function(a){var b={};b.value=b.label=f.trim(a);return b});e?a.Ls=this.sc(function(a){var b={nc:[],MY:!1},d=a.Rs,f,h;h=function(b,e){var f;b.is("option")?a.Sl(d,b.text(),b)&&e.push(g.cl(b)):b.is("optgroup")&&(f=g.cl(b),c.Bi(b.children(),function(a,b){h(b,f.children)}),0<f.children.length&&e.push(f))};f=e.children();void 0!==
this.uj()&&0<f.length&&""==f.first().attr("value")&&(f=f.slice(1));c.Bi(f,function(a,c){h(c,b.nc)});a.gc(b)}):"options"in a&&(a.Ls=c.EW(a.options,a.optionsKeys?a.optionsKeys:null));return a},MG:function(a){a=f.Event(this.tc+"-selecting",{val:this.id(a),object:a});this.ca.element.trigger(a);return!a.isDefaultPrevented()},qg:function(){return!0===this.DH},Hk:function(){var a=this.Ik&&!this.hl;if(a===this.DH)return!1;this.ta.toggleClass("oj-disabled",!a);this.close();this.DH=a;return!0},ai:function(a){void 0===
a&&(a=!0);this.Ik!==a&&(this.Ik=a,this.ca.element.prop("disabled",!a),this.Hk())},UB:function(){this.ai(!1)},hl:function(a){void 0===a&&(a=!1);if(this.hl===a)return!1;this.hl=a;this.ca.element.prop("readonly",a);this.Hk();return!0},od:function(){return this.ta.hasClass("oj-listbox-dropdown-open")},dl:function(){var a=this.Gc,b=this.ta.offset(),c=this.ta.outerHeight(!1),d=this.ta.outerWidth(!1),e=a.outerHeight(!1),g=f(window),h=g.width(),k=g.height(),u=g.scrollLeft()+h,x=g.scrollTop()+k,c=b.top+c,
v=b.left,x=c+e<=x,A=b.top-e>=this.body().scrollTop(),w=a.outerWidth(!1),u=v+w<=u,B;a.hasClass("oj-listbox-drop-above")?(e=!0,!A&&x&&(B=!0,e=!1)):(e=!1,!x&&A&&(e=B=!0));B?(a.hide(),b=this.ta.offset(),c=this.ta.outerHeight(!1),d=this.ta.outerWidth(!1),a.outerHeight(!1),u=g.scrollLeft()+h,g.scrollTop(),c=b.top+c,!e&&this.wj()&&(c-=1),v=b.left,w=a.outerWidth(!1),u=v+w<=u,a.show()):!e&&this.wj()&&(c-=1);"static"!==this.body().css("position")&&(g=this.body().offset(),c-=g.top,v-=g.left);u||(v=b.left+d-
w);d={left:v,width:d};e?(d.bottom=k-b.top,d.top="auto",this.ta.addClass("oj-listbox-drop-above"),a.addClass("oj-listbox-drop-above")):(d.top=c,d.bottom="auto",this.ta.removeClass("oj-listbox-drop-above"),a.removeClass("oj-listbox-drop-above"));a.css(d)},mG:function(){var a;if(this.od()||!1===this.Ik||!0===this.hl)return!1;a=f.Event(this.tc+"-opening");this.ca.element.trigger(a);return!a.isDefaultPrevented()},mB:function(){this.ta.removeClass("oj-listbox-drop-above");this.Gc.removeClass("oj-listbox-drop-above")},
open:function(a){if(!this.mG(a))return!1;this.Hj();return!0},Hj:function(){var a=this.Sj,b="scroll."+a,c="resize."+a,d="orientationchange."+a;this.ta.addClass("oj-listbox-dropdown-open");this.mB();this.Gc[0]!==this.body().children().last()[0]&&this.Gc.detach().appendTo(this.body());this.Gc.appendTo(this.body());f("#oj-listbox-drop").removeAttr("id");this.Gc.attr("id","oj-listbox-drop");this.dl();this.Gc.show();this.dl();this.zq().attr("aria-expanded",!0);var e=this;this.ta.parents().add(window).each(function(){f(this).on(c+
" "+b+" "+d,function(){e.dl()})})},close:function(){if(this.od()){var a=this.Sj,b="scroll."+a,c="resize."+a,d="orientationchange."+a;this.ta.parents().add(window).each(function(){f(this).off(b).off(c).off(d)});this.mB();this.Gc.removeAttr("id");this.Gc.hide();this.ta.removeClass("oj-listbox-dropdown-open");this.nc.empty();this.zq().attr("aria-expanded",!1)}},fh:function(){},DO:function(){var a=this.nc,b,c,d,e;c=this.zj();0>c||(0==c?a.scrollTop(0):(b=this.Jk().find(".oj-listbox-result-label"),d=f(b[c]),
e=d.offset().top+d.outerHeight(!0),c===b.length-1&&(b=a.find("li.oj-listbox-more-results"),0<b.length&&(e=b.offset().top+b.outerHeight(!0))),b=a.offset().top+a.outerHeight(!0),e>b&&a.scrollTop(a.scrollTop()+(e-b)),e=d.offset().top-a.offset().top,0>e&&"none"!=d.css("display")&&a.scrollTop(a.scrollTop()+e)))},Jk:function(){return this.nc.find(".oj-listbox-result-selectable:not(.oj-disabled, .oj-selected)")},vE:function(a){for(var b=this.Jk(),c=this.zj();-1<=c&&c<b.length;){var c=c+a,d=f(b[c]);if(d.hasClass("oj-listbox-result-selectable")&&
!d.hasClass("oj-disabled")&&!d.hasClass("oj-selected")){this.zj(c);break}}},zj:function(a){var b=this.Jk();if(0===arguments.length)return b.get().indexOf(b.filter(".oj-hover")[0]);a>=b.length&&(a=b.length-1);0>a&&(a=0);this.Jw();b=f(b[a]);b.addClass("oj-hover");this.zq().attr("aria-activedescendant",b.find(".oj-listbox-result-label").attr("id"));this.DO()},Jw:function(){this.nc.find(".oj-hover").removeClass("oj-hover")},uD:function(a){a=f(a.target).closest(".oj-listbox-result-selectable");if(0<a.length&&
!a.is(".oj-hover")){var b=this.Jk();this.zj(b.index(a))}else 0==a.length&&this.Jw()},Xr:function(a){var b=this.search,d=this.nc,e=this.ca,g=this,h;h=b.val();var k=f.data(this.ta,this.Ga+"-last-term"),t;!0!==a&&k&&h===k||(f.data(this.ta,this.Ga+"-last-term",h),t=++this.aJ,this.Jw(),h=this.search.val(),this.By=1,e.Ls({element:e.element,Rs:void 0!==h&&null!=h&&!0!==a?h:"",page:this.By,context:null,Sl:e.Sl,gc:this.sc(function(f){t==this.aJ&&this.od()&&(this.context=void 0===f.context?null:f.context,0===
f.nc.length&&c.qV(g.$d,e.JH,"formatNoMatches")?"oj-select"==this.Ga?(f="\x3cli class\x3d'oj-listbox-no-results'\x3e"+e.JH(g.$d,b.val())+"\x3c/li\x3e",d.html(f),g.dl()):this.close():(d.empty(),g.ca.OW.call(this,d,f.nc,{Rs:b.val(),page:this.By,context:null},this.pG()),this.Ln(f,a),g.dl()))})}))},fu:function(a){this.close(a)},dn:function(){c.Rd(this.search)},Dr:function(a,b){var c=this.zj(),d=this.nc.find(".oj-hover").closest(".oj-listbox-result").data(this.tc);d?(this.zj(c),this.rr(d,a,b)):a&&a.RI&&
this.close(b)},uj:function(){return this.ca.element.attr("placeholder")||this.ca.element.attr("data-placeholder")||this.ca.element.data("placeholder")||this.ca.placeholder},pi:function(){var a=this.uj();a&&(this.search.attr("placeholder",a),this.ta.removeClass(this.Ga+"-allowclear"))},zD:function(){var a;a:{var b,c,d;a=this.ca.element.attr("style");if(void 0!==a)for(a=a.split(";"),c=0,d=a.length;c<d;c+=1)if(b=a[c].replace(/\s/g,""),b=b.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),
null!==b&&1<=b.length){a=b[1];break a}a=void 0}null!==a&&this.ta.css("width",a)},vb:function(){return this.$d.option("value")},Vi:function(a,b){"string"===typeof a?this.$d.Ad([a],b,{po:!1}):this.$d.Ad(a,b,{po:!1});this.ca.element.val(a)},pG:function(){return!1},zq:function(){return this.search},wj:function(){return void 0!==this.ca.minimumResultsForSearch&&void 0!==this.ta.wj}}),d={yx:!0,KW:!0,JH:function(){return"No matches found"},id:function(a){return a.id},Sl:function(a,b){return 0<=(""+b).toUpperCase().indexOf((""+
a).toUpperCase())},separator:",",ms:c.HV,zY:!1,cX:!1},e=c.mo(b,{Hk:function(){e.t.Hk.apply(this,arguments)&&this.search.prop("disabled",!this.qg())},Rd:function(){this.od()&&this.close()},_destroy:function(){f("label[for\x3d'"+this.search.attr("id")+"']").attr("for",this.ca.element.attr("id"));e.t._destroy.apply(this,arguments)},ju:function(b){this.selection.data(this.tc)&&(b||a.C.warn("Event should not be null when user modified the value in UI"),this.Vi([],b),this.search.val(""),this.selection.removeData(this.tc));
this.pi()},Yk:function(){this.ca.Ii.call(null,this.Ai?this.Ai:this.ca.element,this.sc(this.WG))},cq:function(a){if(this.qg())if(a.which===c.Ha.PAGE_UP||a.which===c.Ha.PAGE_DOWN)c.Jd(a);else{switch(a.which){case c.Ha.UP:case c.Ha.DOWN:this.od()?this.vE(a.which===c.Ha.UP?-1:1):this.open(a);c.Jd(a);return;case c.Ha.ENTER:this.Dr(null,a);c.Jd(a);return;case c.Ha.TAB:this.close(a);return;case c.Ha.Vs:this.fu(a);return}this.YG=!0;this.od()||this.open(a)}},wN:function(a){this.qg()&&!this.od()&&this.open(a)},
Zq:function(){var a;a=this.ta;var b=c.To(),d;this.selection=a=a.find("."+this.Ga+"-choice");a.attr("id",this.Ga+"-choice-"+b);d=f("label[for\x3d'"+this.ca.element.attr("id")+"']");d.attr("id")||d.attr("id",this.Ga+"-label-"+b);a.find("."+this.Ga+"-input").attr("id",this.Ga+"-input-"+b);this.nc.attr("id","oj-listbox-results-"+b);this.search.attr("aria-owns","oj-listbox-results-"+b);this.search.attr("aria-labelledby",d.attr("id"));a.on("keydown",this.sc(this.cq));a.on("mousedown","abbr",this.sc(function(a){this.qg()&&
(this.ju(a),c.AW(a),this.close(a),this.selection.focus())}));a.on("mousedown",this.sc(function(a){this.ca.element.prop("disabled")&&c.Jd(a);this.od()?this.close(a):this.qg()&&this.open(a);this.search.focus()}));a.on("focus",this.sc(function(a){c.Jd(a)}));this.search.on("blur",this.sc(function(a){if(void 0!==this.search.val()&&0>=this.nc.children().length)if(this.ca.manageNewEntry){if(!this.selection.data("ojcombobox")&&""!==this.search.val()||this.selection.data("ojcombobox")&&this.selection.data("ojcombobox").label!==
this.search.val()){var b=this.ca.manageNewEntry(this.search.val());this.rr(b,null,a)}}else null==this.ca.manageNewEntry&&(b=this.selection.data(this.tc),""==this.search.val()?this.ju(a):b||""===this.search.val()?(a=this.ca.Hx(b,0,this.ca.ms),void 0!==a&&this.search.val(a)):this.fh());this.search.removeClass(this.Ga+"-focused")}));this.zD();this.ca.element.hide().attr("aria-hidden",!0);this.pi()},el:function(){var a=e.t.el.apply(this,arguments),b=this,c=a.element.get(0).tagName.toLowerCase();if("input"===
c&&a.element.attr("list")||"select"===c&&0<a.element.children().length)a.Ii=function(a,c){var d,e=b.vb();Array.isArray(e)&&(e=e[0]);d=void 0!==e&&null!==e?b.cl(a.find("option").filter(function(){return this.value===e})):b.cl(a.find("option").filter(function(){return this.selected}));c(d)};else if("options"in a||this.vb()&&0<this.vb().length)a.Ii=a.Ii||function(d,e){var g="";b.vb()&&b.vb().length&&(g=b.vb()[0]);var h=null,k=null;a.Ls({Sl:function(b,c,d){(b=g===a.id(d))&&(k=d);h||(h=d);return b},gc:f.isFunction(e)?
function(){k||"select"!==c||(k=h);e(k)}:f.noop})};return a},Ln:function(a,b,d){var e=-1,f=this;a=this.Jk();c.Bi(a,function(a,b){if(f.vb()&&f.vb()[0]===f.id(b.data(f.tc)))return e=a,!1});!1!==d&&!0===b&&0<=e&&this.zj(e)},rr:function(a,b,c){this.MG(a)&&(this.vb()&&this.vb(),this.Ah(a),this.close(c),this.Vi(0===this.id(a).length?[]:this.id(a),c))},mG:function(a){return this.od()||!1===this.Ik||!0===this.hl?!1:this.$d._trigger("beforeExpand",a,{component:this.ca.element})},fh:function(){this.search.val("")}}),
g=c.mo(e,{tc:"ojcombobox",Ga:"oj-combobox",tu:function(){return f(document.createElement("div")).attr({"class":"oj-combobox oj-component"}).html("\x3cdiv class\x3d'oj-combobox-choice' tabindex\x3d'-1' role\x3d'presentation'\x3e   \x3cinput type\x3d'text' autocomplete\x3d'off' autocorrect\x3d'off' autocapitalize\x3d'off'       spellcheck\x3d'false' class\x3d'oj-combobox-input' role\x3d'combobox' aria-expanded\x3d'false' aria-autocomplete\x3d'list' /\x3e   \x3cabbr class\x3d'oj-combobox-clear-entry' role\x3d'presentation'\x3e\x3c/abbr\x3e   \x3ca class\x3d'oj-combobox-arrow' role\x3d'presentation'\x3e\x3cb class\x3d'oj-combobox-icon oj-component-icon oj-clickable-icon oj-combobox-open-icon' role\x3d'presentation'\x3e\x3c/b\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d'oj-listbox-drop' style\x3d'display:none' role\x3d'presentation'\x3e   \x3cul class\x3d'oj-listbox-results' role\x3d'listbox'\x3e   \x3c/ul\x3e\x3c/div\x3e")},
ai:function(a){g.t.ai.apply(this,arguments);this.Ik?this.ta.find(".oj-combobox-arrow").removeClass("oj-disabled"):this.ta.find(".oj-combobox-arrow").addClass("oj-disabled")},close:function(a){this.od()&&g.t.close.apply(this,arguments)},Hj:function(a){var b,c;g.t.Hj.apply(this,arguments);b=this.search.get(0);b.createTextRange?(b=b.createTextRange(),b.collapse(!1),b.select()):b.setSelectionRange&&(c=this.search.val().length,b.setSelectionRange(c,c));this.Xr(!0)},Ah:function(a){this.selection.data(this.tc,
a);null!==a?(a=this.ca.Hx(a,0,this.ca.ms),void 0!==a&&this.search.val(a),this.search.removeClass(this.Ga+"-default")):this.pi();this.ca.bV&&this.ta.addClass(this.Ga+"-allowclear")},WG:function(a){if(void 0===a||null===a)a=(a=this.vb())?Array.isArray(a)?Array.isArray(a)&&a.length?{label:a[0]}:null:{label:a}:null;this.Ah(a);this.close()}}),h=c.mo(e,{tc:"ojselect",Ga:"oj-select",YG:!1,tu:function(){return f(document.createElement("div")).attr({"class":"oj-select oj-component"}).html("\x3cdiv class\x3d'oj-select-choice' tabindex\x3d'0' role\x3d'combobox'      aria-autocomplete\x3d'none' aria-expanded\x3d'false' aria-ready\x3d'true'\x3e  \x3cspan class\x3d'oj-select-chosen'\x3e\x3c/span\x3e  \x3cabbr class\x3d'oj-select-search-choice-close' role\x3d'presentation'\x3e\x3c/abbr\x3e  \x3ca class\x3d'oj-select-arrow' role\x3d'presentation'\x3e    \x3cb class\x3d'oj-component-icon oj-clickable-icon oj-select-open-icon' role\x3d'presentation'\x3e\x3c/b\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d'oj-listbox-drop' style\x3d'display:none' role\x3d'presentation'\x3e  \x3cdiv class\x3d'oj-listbox-search-wrapper'\x3e  \x3cdiv class\x3d'oj-listbox-search'\x3e    \x3cinput type\x3d'text' autocomplete\x3d'off' autocorrect\x3d'off' autocapitalize\x3d'off'           spellcheck\x3d'false' class\x3d'oj-listbox-input' title\x3d'Search field'            role\x3d'combobox' aria-expanded\x3d'false' aria-autocomplete\x3d'list' /\x3e    \x3cspan class\x3d'oj-listbox-spyglass-box'\x3e      \x3cspan class\x3d'oj-component-icon oj-listbox-search-icon' role\x3d'presentation'\x3e       \x3cb role\x3d'presentation'\x3e\x3c/b\x3e\x3c/span\x3e    \x3c/span\x3e  \x3c/div\x3e  \x3c/div\x3e   \x3cul class\x3d'oj-listbox-results' role\x3d'listbox'\x3e   \x3c/ul\x3e\x3c/div\x3e")},
ai:function(a){h.t.ai.apply(this,arguments);this.Ik?(this.ta.find(".oj-select-choice").attr("tabindex","0"),this.ta.find(".oj-select-arrow").removeClass("oj-disabled")):(this.ta.find(".oj-select-choice").attr("tabindex","-1"),this.ta.find(".oj-select-arrow").addClass("oj-disabled"))},close:function(a){this.od()&&(h.t.close.apply(this,arguments),this.$w(a)||this.fh(),c.Rd(this.selection),this.ta.find(".oj-listbox-spyglass-box").off("mouseup click"))},Hj:function(a){var b,c;h.t.Hj.apply(this,arguments);
this.lU();this.wj()&&(b=this.search.get(0),b.createTextRange?(b=b.createTextRange(),b.collapse(!1),b.select()):b.setSelectionRange&&(c=this.search.val().length,b.setSelectionRange(c,c)));this.Xr(!0)},Zq:function(){var a=this.Sj+"_selected";this.text=this.ta.find(".oj-select-chosen").attr("id",a);h.t.Zq.apply(this,arguments);this.ta.find(".oj-select-choice").attr({"aria-owns":this.search.attr("aria-owns"),"aria-labelledby":this.search.attr("aria-labelledby"),"aria-describedby":a});this.search.on("keydown",
this.sc(this.cq));this.search.on("keyup-change input",this.sc(this.wN));var b=this;this.selection.on("blur",function(a){b.$w(a)})},Yk:function(){this.VD()?(this.Ah(null),this.close(),this.pi()):h.t.Yk.apply(this,arguments)},WG:function(a){if(void 0!==a&&null!==a){var b,c=this.vb(),c=Array.isArray(c)?c[0]:c;b=this.ca.id(a);c!==b&&(void 0===c||null===c?this.$d.options.value=Array.isArray(b)?b:[b]:this.Vi(Array.isArray(b)?b:[b]));this.Ah(a);this.close()}},Ah:function(a){this.selection.data(this.tc,a);
null!==a&&this.text.text(a.label);a&&""!=a.id&&this.text.removeClass(this.Ga+"-default");this.ca.bV&&this.ta.addClass(this.Ga+"-allowclear")},zq:function(){return this.search.attr("aria-expanded")&&this.wj()?this.search:this.selection},VD:function(){if(null===this.uj())return!1;var a=this.vb(),a=Array.isArray(a)?a[0]:a;return""===a||void 0===a||null===a},uj:function(){return this.ca.placeholder},pG:function(){return!0},pi:function(){var a=this.uj();this.VD()&&void 0!==a&&(void 0===a&&(a=""),this.text.text(a).addClass(this.Ga+
"-default"),this.ta.removeClass(this.Ga+"-allowclear"))},Vi:function(a,b){h.t.Vi.call(this,a,b);this.selection.data("selectVal",a)},cq:function(a){if(!c.Ha.zI(a)&&!c.Ha.BI(a)){switch(a.which){case c.Ha.TAB:this.close(a);this.selection.focus();this.$w(a);return;case c.Ha.ENTER:if(a.target===this.selection[0]&&!this.od()){this.open(a);c.Jd(a);return}}h.t.cq.apply(this,arguments)}},$w:function(a){return""==this.text.text()?(this.ju(a),!0):!1},lU:function(){var a=!1,b=this.Gc.find(".oj-listbox-search");
b&&(this.wj()?(this.Gc.find(".oj-listbox-search-wrapper").removeClass("oj-helper-hidden-accessible"),f(b).removeAttr("aria-hidden"),a=!0):(this.Gc.find(".oj-listbox-search-wrapper").addClass("oj-helper-hidden-accessible"),f(b).attr({"aria-hidden":"true"})));c.Rd(a?this.search:this.selection);if(a){var d=this;b.find(".oj-listbox-spyglass-box").on("mouseup click",function(a){d.search.focus();a.stopPropagation()})}},wj:function(){return(this.Ai?this.Ai[0].length:this.ca.options?this.ca.options.length:
0)>this.ca.minimumResultsForSearch||this.YG}});a.La("oj.ojCombobox",f.oj.editableValue,{defaultElement:"\x3cinput\x3e",widgetEventPrefix:"oj",options:{converter:void 0,placeholder:void 0,multiple:!1,options:null,optionsKeys:null,beforeExpand:null},widget:function(){return this.vc.ta},_ComponentCreate:function(){this._super();this.ub()},_InitOptions:function(b,d){this._super(b,d);a.ud.Ji([{attribute:"disabled",defaultOptionValue:null,validateOption:!0},{attribute:"placeholder",defaultOptionValue:""},
{attribute:"required",defaultOptionValue:!1,coerceDomValue:!0,validateOption:!0},{attribute:"title",defaultOptionValue:""}],d,this);if(void 0===this.options.value)this.options.value=void 0!==this.element.attr("value")?c.gk(this.element.val(),","):null;else{var e=this.options.value;Array.isArray(e)?e=e.slice(0):"string"===typeof e&&(e=c.gk(e,","));this.options.value=e}},ub:function(){var a,b=this.options.multiple;a={};a.element=this.element;a.$d=this;a=f.extend(this.options,a);this.vc=b?new k:new g;
this.vc._init(a)},_destroy:function(){var a=this._super();this.vc._destroy();return a},refresh:function(){this._super();this.vc._destroy();this.ub()},validate:function(){if(this.vc)return this.Ad(this.vc.vb(),null,this.Ht)},_setOption:function(a,b,d){"value"===a&&(Array.isArray(b)?b=b.slice(0):"string"===typeof b&&(b=c.gk(b,",")));this._super(a,b,d);"options"===a&&(this.vc.ca.options=b,this.vc.ca=this.vc.el(this.vc.ca));"disabled"===a&&(b?this.vc.UB():this.vc.ai())},hg:function(){this.vc.Yk()},_SetPlaceholder:function(a){this.vc&&
(this.vc.ca.placeholder=a,this.vc.pi&&this.vc.pi())},_GetMessagingLauncherElement:function(){return this.vc.search},Cf:function(){return this.vc.search},_GetDefaultStyleClass:function(){return"oj-combobox"},getNodeBySubId:function(a){var b=null;if(null==a)return this.vc.ta?this.vc.ta[0]:null;b=this._super(a);if(!b)switch(a=a.subId,"oj-combobox-drop"===a&&(a="oj-listbox-drop"),"oj-combobox-results"===a&&(a="oj-listbox-results"),"oj-combobox-selection"===a&&(a="oj-combobox-selected-choice"),a){case "oj-combobox-input":case "oj-combobox-arrow":case "oj-listbox-drop":case "oj-listbox-results":b=
this.widget().find("."+a)[0];break;case "oj-combobox-selected-choice":b=this.widget().find("."+a)}return b||null}});a.La("oj.ojSelect",f.oj.editableValue,{defaultElement:"\x3cselect\x3e",widgetEventPrefix:"oj",options:{minimumResultsForSearch:10,placeholder:void 0,options:null,optionsKeys:null,beforeExpand:null},widget:function(){return this.select.ta},_ComponentCreate:function(){this._super();this.ub()},ub:function(){var a={};a.element=this.element;a.$d=this;a=f.extend(this.options,a);this.select=
new h;this.select._init(a)},refresh:function(){this._super();this.select._destroy();this.ub()},_destroy:function(){var a=this._super();this.select._destroy();return a},_SetPlaceholder:function(){},Iz:function(){return"string"===typeof this.options.placeholder},Dz:function(){this.nA(null);this._SetPlaceholder(null)},_InitOptions:function(b,d){this._super(b,d);a.ud.Ji([{attribute:"disabled",defaultOptionValue:null,validateOption:!0},{attribute:"placeholder",defaultOptionValue:null},{attribute:"required",
defaultOptionValue:!1,coerceDomValue:!0,validateOption:!0},{attribute:"title",defaultOptionValue:""}],d,this);if(void 0===this.options.value)this.options.value=void 0!==this.element.attr("value")?c.gk(this.element.val(),","):null;else{var e=this.options.value;Array.isArray(e)?e=e.slice(0):"string"===typeof e&&(e=[e]);this.options.value=e}},validate:function(){return this.Ad(this.select.vb(),null,this.Ht)},hg:function(){this.select.Yk()},_setOption:function(a,b,c){"value"===a?Array.isArray(b)?b=b.slice(0):
"string"===typeof b&&(b=[b]):"placeholder"===a?(this.select.ca.placeholder=b,this.select.pi()):"minimumResultsForSearch"===a&&(this.select.ca.minimumResultsForSearch=b);this._super(a,b,c);"disabled"===a?b?this.select.UB():this.select.ai():"options"===a&&this.ub()},$u:function(){if(this.select&&this.select.od()){var b=f(".oj-listbox-drop");if("oj-listbox-drop"==b.attr("id")&&b.attr(a.da.cg)==this.select.Sj)return b}return null},getNodeBySubId:function(a){var b=null,c;if(null==a)return this.select.ta?
this.select.ta[0]:null;b=this._super(a);if(!b)switch(c=a.subId,"oj-select-drop"===c&&(c="oj-listbox-drop"),"oj-select-results"===c&&(c="oj-listbox-results"),"oj-select-search"===c&&(c="oj-listbox-search"),c){case "oj-select-choice":case "oj-select-chosen":b=this.widget().find("."+c)[0];break;case "oj-listbox-drop":var d=this.$u();d&&(b=d[0]);break;case "oj-listbox-input":case "oj-listbox-search":case "oj-listbox-results":(d=this.$u())&&(b=d.find("."+c)[0]);break;case "oj-listbox-result-label":this.$u()&&
(d=f("#"+this.select.nc.attr("id")).children(),a=a.index,d.length&&a<d.length&&(b=d.eq(a).find("."+c)[0]))}return b||null},_GetDefaultStyleClass:function(){return"oj-select"},_GetMessagingLauncherElement:function(){return this.select.selection},Cf:function(){return this.select.selection}});var k=c.mo(b,{tc:"ojcombobox",Ga:"oj-combobox",tu:function(){return f(document.createElement("div")).attr({"class":"oj-combobox oj-combobox-multi oj-component"}).html("\x3cul class\x3d'oj-combobox-choices'\x3e  \x3cli class\x3d'oj-combobox-search-field'\x3e    \x3cinput type\x3d'text' role\x3d'combobox' aria-expanded\x3d'false' aria-autocomplete\x3d'list' autocomplete\x3d'off' autocorrect\x3d'off' autocapitalize\x3d'off' spellcheck\x3d'false' class\x3d'oj-combobox-input'\x3e  \x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d'oj-combobox-description oj-helper-hidden-accessible'/\x3e\x3cdiv class\x3d'oj-listbox-drop oj-listbox-drop-multi' style\x3d'display:none'\x3e   \x3cul class\x3d'oj-listbox-results' role\x3d'listbox'\x3e   \x3c/ul\x3e\x3c/div\x3e")},
el:function(){var a=k.t.el.apply(this,arguments),b=this;"input"===a.element.get(0).tagName.toLowerCase()&&a.element.attr("list")?a.Ii=function(a,d){var e=[];if(b.vb()&&b.vb().length)for(var f,g=b.vb(),h=0;h<g.length;h++){var l=g[h];(f=a.find("option").filter(function(){return this.value===l}))&&f.length?e.push(b.cl(f)):e.push({value:l,label:l})}else f=a.find("option").filter(function(){return this.selected}),c.Bi(f,function(a,c){e.push(b.cl(c))});d(e)}:"options"in a&&(a.Ii=a.Ii||function(c,d){var e=
b.vb(),g=[];a.Ls({Sl:function(b,c,d){(b=f.grep(e,function(b){return b===a.id(d)}).length)&&g.push(d);return b},gc:f.isFunction(d)?function(){for(var b=[],c=0;c<e.length;c++){for(var f=e[c],h=!1,k=0;k<g.length;k++){var m=g[k];if(f===a.id(m)){b.push(m);g.splice(k,1);h=!0;break}}h||b.push({value:f,label:f})}d(b)}:f.noop})});return a},ml:function(a){var b=this.ta.find("."+this.Ga+"-selected-choice.oj-focus");b.length&&a&&a[0]==b[0]||(b.length&&this.ca.element.trigger("choice-deselected",b),b.removeClass("oj-focus"),
a&&a.length&&(this.close(),a.addClass("oj-focus"),this.ta.find(".oj-combobox-description").html(a.attr("valueText")+". Press back space to delete.").attr("aria-live","assertive"),this.ca.element.trigger("choice-selected",a)))},_destroy:function(){f("label[for\x3d'"+this.search.attr("id")+"']").attr("for",this.ca.element.attr("id"));k.t._destroy.apply(this,arguments)},Zq:function(){var a="."+this.Ga+"-choices",b,d=c.To(),e;this.bX=this.ta.find("."+this.Ga+"-search-field");this.selection=b=this.ta.find(a);
var g=this;this.selection.on("click","."+this.Ga+"-selected-choice:not(."+this.Ga+"-locked)",function(){g.search[0].focus();g.ml(f(this))});e=f("label[for\x3d'"+this.ca.element.attr("id")+"']");e.attr("id")||e.attr("id",this.Ga+"-label-"+d);b.find("."+this.Ga+"-input").attr("id",this.Ga+"-input-"+d);this.nc.attr("id","oj-listbox-results-"+d);this.search.attr("aria-owns","oj-listbox-results-"+d);this.search.attr("aria-labelledby",e.attr("id"));this.search.on("input paste",this.sc(function(){this.qg()&&
!this.od()&&this.open()}));this.search.attr("tabindex",this.Ex);this.ey=0;this.search.on("keydown",this.sc(function(a){if(this.qg()){++this.ey;var d=b.find("."+this.Ga+"-selected-choice.oj-focus"),e=d.prev("."+this.Ga+"-selected-choice:not(."+this.Ga+"-locked)"),f=d.next("."+this.Ga+"-selected-choice:not(."+this.Ga+"-locked)"),g=c.WV(this.search);if(!d.length||a.which!=c.Ha.LEFT&&a.which!=c.Ha.RIGHT&&a.which!=c.Ha.fp&&a.which!=c.Ha.Ty&&a.which!=c.Ha.ENTER)if((a.which!==c.Ha.fp||1!=this.ey)&&a.which!=
c.Ha.LEFT||0!=g.offset||g.length){this.ml(null);if(this.od())switch(a.which){case c.Ha.UP:case c.Ha.DOWN:this.vE(a.which===c.Ha.UP?-1:1);c.Jd(a);return;case c.Ha.ENTER:this.Dr(null,a);c.Jd(a);return;case c.Ha.TAB:this.close(a);return;case c.Ha.Vs:this.fu(a);return}a.which===c.Ha.TAB||c.Ha.zI(a)||c.Ha.BI(a)||a.which===c.Ha.fp||a.which===c.Ha.Vs||a.which===c.Ha.ENTER&&(!1===this.ca.KW||a.altKey||a.ctrlKey||a.shiftKey||a.metaKey)||(this.open(),a.which!==c.Ha.PAGE_UP&&a.which!==c.Ha.PAGE_DOWN||c.Jd(a),
a.which===c.Ha.ENTER&&c.Jd(a))}else this.ml(b.find("."+this.Ga+"-selected-choice:not(."+this.Ga+"-locked)").last()),c.Jd(a);else g=d,a.which==c.Ha.LEFT&&e.length?g=e:a.which==c.Ha.RIGHT?g=f.length?f:null:a.which===c.Ha.fp?(this.hx(d.first(),a),this.search.width(10),g=e.length?e:f):a.which==c.Ha.Ty?(this.hx(d.first(),a),this.search.width(10),g=f.length?f:null):a.which==c.Ha.ENTER&&(g=null),this.ml(g),c.Jd(a),g&&g.length||this.open()}}));this.search.on("keyup",this.sc(function(){this.ey=0}));this.search.on("blur",
this.sc(function(a){if(this.ca.manageNewEntry&&this.search.val()&&0>=this.nc.children().length){var b=this.ca.manageNewEntry(this.search.val());this.rr(b,null,a)}this.search.removeClass(this.Ga+"-focused");this.ml(null);this.od()||this.fh();a.stopImmediatePropagation()}));this.ta.on("click",a,this.sc(function(a){!this.qg()||0<f(a.target).closest("."+this.Ga+"-selected-choice").length||(this.ml(null),this.open(),this.dn(),a.preventDefault())}));this.ta.on("focus",a,this.sc(function(){}));this.zD();
this.ca.element.hide().attr("aria-hidden",!0);this.fh()},Hk:function(){k.t.Hk.apply(this,arguments)&&this.search.prop("disabled",!this.qg())},Yk:function(){null!==this.vb()&&0!==this.vb().length||""!==this.ca.element.text()||(this.Ah([]),this.close(),this.fh());if(this.Ai||null!==this.vb()&&this.vb().length){var a=this;this.ca.Ii.call(null,this.Ai?this.Ai:this.ca.element,function(b){void 0!==b&&null!==b&&(a.Ah(b),a.close(),a.fh())})}},fh:function(){var a=this.uj(),b=this.CP();void 0===a||this.vb()&&
0!==this.vb().length?(this.search.attr("placeholder",""),this.search.val("").width(10)):(this.search.attr("placeholder",a),this.search.val("").width(0<b?b:this.ta.css("width")))},Hj:function(a){this.$d._trigger("beforeExpand",a)&&(this.FF(),k.t.Hj.apply(this,arguments),this.dn(),this.Xr(!0),this.search.focus())},close:function(a){this.od()&&k.t.close.apply(this,arguments)},Rd:function(){this.close();this.search.focus()},Ah:function(a){var b=[],c=[],d=this;f(a).each(function(){0>b.indexOf(d.id(this))&&
(b.push(d.id(this)),c.push(this))});a=c;this.selection.find("."+this.Ga+"-selected-choice").remove();f(a).each(function(){d.DA(this)});d.Ln()},rr:function(a,b,d){if(this.MG(a)){this.DA(a);var e=this.id(a),g=this.vb()?this.vb().slice(0):[];this.$d.isValid()||(g=c.gk(this.ca.element.val(),this.ca.separator));f(a).each(function(){0>g.indexOf(e)&&g.push(e)});this.Vi(g,d);!this.select&&this.ca.yx||this.Ln(a,!1,!0===this.ca.yx);this.ca.yx?(this.close(d),this.search.width(10)):0<this.Jk().length?(this.fh(),
this.search.width(10),this.FF(),this.dl()):(this.close(d),this.search.width(10));b&&b.RI||this.dn()}},fu:function(a){this.close(a);this.dn()},DA:function(a){var b=!a.locked,d=f("\x3cli class\x3d'"+this.Ga+"-selected-choice'\x3e    \x3cdiv\x3e\x3c/div\x3e    \x3ca href\x3d'#' onclick\x3d'return false;' class\x3d'"+this.Ga+"-clear-entry' tabindex\x3d'-1'\x3e    \x3cspan class\x3d'oj-component-icon oj-clickable-icon oj-combobox-clear-entry-icon' role\x3d'presentation'\x3e\x3c/a\x3e\x3c/li\x3e"),e=f("\x3cli class\x3d'"+
this.Ga+"-selected-choice "+this.Ga+"-locked'\x3e\x3cdiv\x3e\x3c/div\x3e\x3c/li\x3e"),d=b?d:e;this.id(a);e=this.ca.Hx(a,d.find("div"),this.ca.ms);void 0!==e&&(d.find("div").replaceWith("\x3cdiv class\x3d'"+this.Ga+"-selected-choice-label'\x3e"+e+"\x3c/div\x3e"),d.attr("valueText",e));if(b)d.find("."+this.Ga+"-clear-entry").on("mousedown",c.Jd).on("click dblclick",this.sc(function(a){this.qg()&&(f(a.target).closest("."+this.Ga+"-selected-choice").fadeOut("fast",this.sc(function(){this.hx(f(a.target),
a);this.selection.find("."+this.Ga+"-selected-choice.oj-focus").removeClass("oj-focus");this.close(a);this.dn()})).dequeue(),c.Jd(a))}));d.data(this.tc,a);d.insertBefore(this.bX)},hx:function(a,b){var d=this.vb()?this.vb().slice(0):[],e,f;a=a.closest("."+this.Ga+"-selected-choice");if(0===a.length)throw"Invalid argument: "+a+". Must be ."+this.Ga+"-selected-choice";if(e=a.data(this.tc)){for(this.$d.isValid()||(d=c.gk(this.ca.element.val(),this.ca.separator));0<=(f=d.indexOf(this.id(e)));)d.splice(f,
1),this.Vi(d,b),this.select&&this.Ln();a.remove()}},Ln:function(){var a=this.vb()&&(this.ca.element.val()||this.$d.isValid())?this.vb():[],b=this.nc.find(".oj-listbox-result"),d=this.nc.find(".oj-listbox-result-with-children"),e=this;c.Bi(b,function(b,c){var d=e.id(c.data(e.tc));a&&0<=a.indexOf(d)&&(c.addClass("oj-selected"),c.find(".oj-listbox-result-selectable").addClass("oj-selected"))});c.Bi(d,function(a,b){b.is(".oj-listbox-result-selectable")||0!==b.find(".oj-listbox-result-selectable:not(.oj-selected)").length||
b.addClass("oj-selected")});0< !b.filter(".oj-listbox-result:not(.oj-selected)").length&&this.close()},CP:function(){return this.selection.width()-c.dI(this.search)},sU:function(a){a='\x3cspan style\x3d"display:none"\x3e'+a+"\x3c/span\x3e";f("body").append(a);a=f("body").find("span:last").width();f("body").find("span:last").remove();return a},FF:function(){var a,b,d,e,f=c.dI(this.search);a=this.sU(this.search.val())+10;b=this.search.offset().left;d=this.selection.width();e=this.selection.offset().left;
b=d-(b-e)-f;b<a&&(b=d-f);40>b&&(b=d-f);0>=b&&(b=a);this.search.width(Math.floor(b))},Vi:function(a,b){var d;d=[];"string"===typeof a&&(a=c.gk(a,this.ca.separator));for(var e=0;e<a.length;e++)0>d.indexOf(a[e])&&d.push(a[e]);this.$d.Ad(d,b,{po:!1});this.ca.element.val(0===d.length?"":d.join(this.ca.separator));this.search.attr("aria-activedescendant",this.ca.element.attr("id"))}})});
//# sourceMappingURL=oj-modular.map